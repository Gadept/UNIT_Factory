/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_wchar.c                                         :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: pkolomiy <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2017/03/20 13:12:20 by pkolomiy          #+#    #+#             */
/*   Updated: 2017/03/20 16:28:28 by pkolomiy         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "libft.h"

char	*ft_wchar(unsigned w)
{
	t_var	v;

	v = ft_var();
	(w <= 127) ? (v.c = 1) : 0;
	(w >= 128 && w <= 2047) ? (v.c = 2) : 0;
	(w >= 2048 && w <= 65535) ? (v.c = 3) : 0;
	(w >= 65536) ? (v.c = 4) : 0;
	v.str = ft_strnew(v.c);
	v.c == 4 ? (v.str[3] = 240 | (w >> 18)) : 0;
	v.c == 4 ? (v.str[2] = 128 | (w >> 12 & 63)) : 0;
	v.c == 3 ? (v.str[2] = 224 | (w >> 12)) : 0;
	v.c >= 3 ? (v.str[1] = 128 | (w >> 6 & 63)) : 0;
	v.c == 2 ? (v.str[1] = 192 | (w >> 6)) : 0;
	v.str[0] = (v.c == 1) ? w : 128 | (w & 63);
	v.tmp = v.str;
	v.str = ft_strrev(v.tmp);
	ft_strdel(&v.tmp);
	return (v.str);
}
